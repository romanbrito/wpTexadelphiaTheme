function GoogleMap(){return{getGoogleMaps:function(e){var n=new google.maps.Map(document.getElementById("map")),a=new google.maps.LatLngBounds;return e.map(function(e,t){var o=new google.maps.LatLng(e.coordinates);a.extend(o),n.fitBounds(a),n.panToBounds(a)}),{map:n}},addMarkers:function(o,e){var n=e.map(function(e,t){return new google.maps.Marker({position:e.coordinates,label:e.label,map:o})});e.map(function(e,t){return n[t].addListener("click",function(){window.open("https://www.google.com/maps/dir/?api=1&destination="+e.coordinates.lat+","+e.coordinates.lng,"_blank")})}),$.getScript("https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js",function(){new MarkerClusterer(o,n,{gridSize:15,imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"})})},getDistance:function(e,t,o){(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[e],destinations:t,travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:!1,avoidTolls:!1},function(e,t){"OK"===t?o(e.rows[0].elements):alert("Geocode was not successful due to: "+t)})}}}var Menu=function(s){return{renderMenu:function(e,t,o,n){var a="";a+='<div class="modal fade" id="'+t+e+'Modal" role="dialog">',a+='<div class="modal-dialog modal-lg">',a+='<div class="modal-content">',a+='<div class="modal-header">',a+='<button type="button" class="close" data-dismiss="modal">&times;</button>',a+='<p class="modal-title">'+o+" "+e+' Menu<a href="../wp-content/themes/texsite/pdf/'+e+"_"+t+'.pdf" target="_blank"><i class="fa fa-print" aria-hidden="true"></i></a></p>',a+="</div>",a+='<div class="modal-body">',a+='<div class="smaller-screen-locations">',n.map(function(e){return a+='<img src="../wp-content/themes/texsite/images/'+e+'.jpg" alt="'+e+' menu" width="100%"> <p></p>'}),a+="</div>",a+='<div class="large-screen-locations">',a+='<object rel="pdf-'+e+"-"+t+'" id="'+t+"-"+e+'-pdf" class="pdf-image" type="application/pdf" data="../wp-content/themes/texsite/pdf/'+e+"_"+t+'.pdf" style="width: 100%">',a+="Your browser does not support objects",a+="</object>",a+="</div>",a+="</div>",a+='<div class="modal-footer">',a+='<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>',a+="</div>",a+="</div>",a+="</div>",a+="</div>",s("#menus").html(a)}}}(jQuery),Location=function(s){function i(e,t){var o="";return o+="<li>",o+='<div class="row main-location">',o+='<div class="location-info col-lg-6">',o+="<h4>"+e.name+"</h4>",o+="<p>"+e.address+"</p>",o+="<p>"+e.city+", ",o+=e.state+" ",o+=e.zip+"</p>",o+='<a href="tel:'+e.phone+'">T. '+e.phone+"</a>",o+="<p>"+e.hours1+"</p>",o+="<p>"+e.hours2+"</p>",o+="<p>"+e.hours3+"</p>",e.miles?o+="<p>Distance: "+e.miles+"</p>":o+="<p></p>",o+="</div>",o+='<div class="location-buttons col-lg-6">',o+='<div class="row">',o+='<a rel="Menu-House-'+e.label+"-"+e.name+"-"+t+'" class="btn btn-default col-lg-6 col-md-6 col-sm-6 col-xs-6" role="button" data-toggle="modal" data-target="#'+e.label+'HouseModal"> Menu</a>',o+='<a rel="Menu-Catering-'+e.label+"-"+e.name+"-"+t+'" class="btn btn-default col-lg-6 col-md-6 col-sm-6 col-xs-6" role="button" data-toggle="modal" data-target="#'+e.label+'CateringModal"> Catering Menu</a>',o+="</div>",o+='<div class="row">',o+='<a class="btn btn-danger" href="https://www.google.com/maps/dir/?api=1&destination='+e.coordinates.lat+","+e.coordinates.lng+'" target="_blank" role="button"> Directions</a>',o+="</div>",o+="</div>",o+="</div>",o+="</li>"}return{renderLocations:function(e,t){var o='<ul class="searchresults">';s.each(e,function(e,t){o+=i(t,e)}),o+="</ul>",s("#update").html(o),t()},searchLocations:function(t,a){s("#search").keyup(function(){var e=s("#search").val(),o=new RegExp(e,"i"),n='<ul class="searchresults">';s.each(t,function(e,t){-1==t.name.search(o)&&-1==t.address.search(o)&&-1==t.zip.search(o)&&-1==t.state.search(o)&&-1==t.city.search(o)||(n+=i(t,e))}),n+="</ul>",s("#update").html(n),a()})}}}(jQuery);function getCurrentPosition(o){if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};o(t)},function(){console.log("geolocation error");o(null)});else{console.log("The browser does not support geolocation");o(null)}}function loadMapsScript(o){var n=o.map(function(e,t){return e.coordinates});$.getScript("https://maps.googleapis.com/maps/api/js?key=AIzaSyBZAdtCTX8ZlyU39tML3S_dOmmWWAh6cdk",function(){console.log("google maps script loaded");var t=GoogleMap();t.addMarkers(t.getGoogleMaps(o).map,o),getCurrentPosition(function(e){t.getDistance(e,n,function(e){var t=e.map(function(e,t){return o[t].distance=e.distance.value,o[t].miles=e.distance.text,o[t]}).sort(function(e,t){return e.distance-t.distance});Location.renderLocations(t,function(){menuClickEvent(t)}),Location.searchLocations(o,function(){menuClickEvent(o)})})})}),Location.renderLocations(o,function(){menuClickEvent(o)}),Location.searchLocations(o,function(){menuClickEvent(o)})}function menuClickEvent(l){$("[rel*='Menu-']").click(function(e){var t=$(e.target).attr("rel").split("-"),o=t[1],n=t[2],a=t[3],s=t[4],i="House"===o?l[s].houseMenuUrl:l[s].cateringMenuUrl;Menu.renderMenu(o,n,a,i)})}var GETinfo=window.location.href.split("/");$.getJSON("../wp-content/themes/texsite/json/locations.json",function(e){var t=e.locations.reduce(function(e,t){return e[t.id]=t,e},{});"locations-menu"===GETinfo[3]?loadMapsScript(e.locations):loadMapsScript([t[GETinfo[3]]])});